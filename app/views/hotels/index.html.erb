<%= stylesheet_link_tag 'inn_index' ,:media => "all"%>

<header>
      <h1>
        <div class="title_big2">
                <svg viewbox="0 0 100 110">
                <defs>
                <linearGradient id="gradient" x1="0" x2="0" y1="0" y2="1">
                    <stop offset="100%" stop-color="rgb(0,0, 0)"/>
                    <stop offset="100%" stop-color="rgb(0,55,255)"/>
                </linearGradient>
                <pattern id="wave" x="0" y="20" width="120" height="20" patternUnits="userSpaceOnUse">
                    <path id="wavePath" d="M-40 9 Q-30 7 -20 9 T0 9 T20 9 T40 9 T60 9 T80 9 T100 9 T120 9 V20 H-20z" mask="url(#mask)" fill="url(#gradient)"> 
                    <animateTransform
                        attributeName="transform"
                        begin="0s"
                        dur="1.5s"
                        type="translate"
                        from="0,0"
                        to="40,0"
                        repeatCount="indefinite" />
                    </path>
                </pattern>
                </defs>
                <text text-anchor="middle" x="50" y="15" font-size="25" fill="url(#wave)"  fill-opacity="0.5">okinav</text>
                <text text-anchor="middle" x="50" y="15" font-size="25" fill="url(#gradient)" fill-opacity="0.1">okinav</text>
            </svg>
        </div>
    </h1>
      <div class="header-list">
      <ul>
        <li><%= link_to "旅館", hotels_path(category: "inn") %></li>
        <li><%= link_to "観光", hotels_path(category: "sightseen") %></li>
        <li><%= link_to "グルメ", hotels_path(category: "gurmet") %></li>
        <li>
          <a  class="menuButton" id="menuButton">
            <div></div>
            <div></div>
            <div></div>
          </a>
        </li>
      </ul>
      
      </div>
</header>

<nav id="nav">


        <ul>
          <li><%= link_to "投稿", new_hotel_path %></li>
          <li>
            <% if user_signed_in? %>
              <%= link_to "My page", user_path(current_user.id) %>
            <% end %>
          </li>
          <li><%= button_to 'Log out',destroy_user_session_path, method: :delete %></li>
        </ul>
</nav>

<div class="mask" id="mask"></div>

 <div class="box">
  <div class="box_main">

    <div class="card">

        <div class="bubbles-container">
          <svg class="bubbles" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 701 1024" style="overflow: visible;">

          <g class="bubbles-large" stroke-width="7">
            <g>
                <g transform="translate(10 940)">
                    <circle cx="40" cy="40" r="40"/>
                </g>
            </g>
            <g>
                <g transform="translate(373 940)">
                    <circle cx="35" cy="35" r="35"/>
                </g>
            </g>
            <g>
                <g transform="translate(408 940)">
                    <circle cx="31" cy="31" r="31"/>
                </g>
            </g>
            <g>
                <g transform="translate(621 940)">
                    <circle cx="45" cy="45" r="45"/>
                </g>
            </g>
            <g>
                <g transform="translate(179 940)">
                    <circle cx="32" cy="32" r="32"/>
                </g>
            </g>
            <g>
                <g transform="translate(50 540)">
                    <circle cx="35" cy="35" r="35"/>
                </g>
            </g>
            <g>
                <g transform="translate(340 240)">
                    <circle cx="37" cy="37" r="37"/>
                </g>
            </g>
            <g>
                <g transform="translate(130 240)">
                    <circle cx="28" cy="28" r="28"/>
                </g>
            </g>
            <g>
                <g transform="translate(430 740)">
                    <circle cx="35" cy="35" r="35"/>
                </g>
            </g>
            <g>
                <g transform="translate(230 840)">
                    <circle cx="43" cy="43" r="43"/>
                </g>
            </g>
            <g>
                <g transform="translate(610 640)">
                    <circle cx="31" cy="31" r="31"/>
                </g>
            </g>
            <g>
                <g transform="translate(700 340)">
                    <circle cx="35" cy="35" r="35"/>
                </g>
            </g>
            <g>
                <g transform="translate(320 555)">
                    <circle cx="39" cy="39" r="39"/>
                </g>
            </g>
          </g>

          <g class="bubbles-small" stroke-width="4">
            <g>
                <g transform="translate(147 984)">
                    <circle cx="15" cy="15" r="15"/>
                </g>
            </g>
            <g>
                <g transform="translate(255 984)">
                    <circle cx="15" cy="15" r="15"/>
                </g>
            </g>
            <g>
                <g transform="translate(573 984)">
                    <circle cx="15" cy="15" r="15"/>
                </g>
            </g>
            <g>
                <g transform="translate(429 984)">
                    <circle cx="15" cy="15" r="15"/>
                </g>
            </g>
            <g>
                <g transform="translate(91 984)">
                    <circle cx="15" cy="15" r="15"/>
                </g>
            </g>
            <g>
                <g transform="translate(640 984)">
                    <circle cx="15" cy="15" r="15"/>
                </g>
            </g>
            <g>
                <g transform="translate(321 984)">
                    <circle cx="15" cy="15" r="15"/>
                </g>
            </g>
            <g>
                <g transform="translate(376 984)">
                    <circle cx="15" cy="15" r="15"/>
                </g>
            </g>
            <g>
                <g transform="translate(376 984)">
                    <circle cx="15" cy="15" r="15"/>
                </g>
            </g>
            <g>
                <g transform="translate(497 984)">
                    <circle cx="15" cy="15" r="15"/>
                </g>
            </g>
            <g>
                <g transform="translate(397 984)">
                    <circle cx="15" cy="15" r="15"/>
                </g>
            </g>
            <g>
                <g transform="translate(237 984)">
                    <circle cx="15" cy="15" r="15"/>
                </g>
            </g>
            <g>
                <g transform="translate(97 984)">
                    <circle cx="15" cy="15" r="15"/>
                </g>
            </g>
            <g>
                <g transform="translate(197 984)">
                    <circle cx="15" cy="15" r="15"/>
                </g>
            </g>
            <g>
                <g transform="translate(247 984)">
                    <circle cx="15" cy="15" r="15"/>
                </g>
            </g>
            <g>
                <g transform="translate(567 984)">
                    <circle cx="15" cy="15" r="15"/>
                </g>
            </g>

          </g>
        </svg>
      </div>
        <div class="inn_title">
          <h1>投稿一覧</h1>
          <h3>旅館、観光、グルメの皆様の投稿を閲覧できます。</h3><br>
          <h3>いいねやコメントもぜひお願いいたします。</h3>
        </div>
    </div>
  
    <div class="pg">
        <%= page_entries_info @hotels %>
        <%= paginate @hotels %>
    </div>

    <div class="tweets-container">
      <% @hotels.each do |t| %>
          <% if t.category=="inn" %>
            <div class="tweet">
              <div class="tweet_left">
                <div class="user_inf">
                  <%= image_tag t.user.image_url, class: "round", size: "80x80" if t.user.image? %>
                  <h3><a href="/users/<%= t.user.id %>"><%= t.user.name %></a></h3>
                </div>
                <h2>「<%= t.title %>」</h2>
                <div class="image">
                  <%= image_tag t.image_url, size: "500x400" if t.image? %>
                </div>
              </div>

              <div class="tweet_right">
                <div class="create_time"><%= t.created_at %></div>
                <div class="star_content">
                  <p>総合評価 : <%= t.star%>点</p>
                  <div id="star-rate<%= t.id%>"></div>    
                      
                        <script>
                        $('#star-rate<%= t.id%>').raty({
                          size      : 40,
                          starOff   : '<%= asset_path('star-off.png') %>',
                          starOn    : '<%= asset_path('star-on.png') %>',
                          half      : false,
                          readOnly: true,
                          score: <%= t.star %>,
                        });
                      </script>
                </div>


                <div class="contents"><%= t.body %></div>
                

                <div class="user_edit">
                  <div>
                    <% if user_signed_in? %>
                      <% if current_user.already_liked?(t) %>
                        <%= button_to hotel_like_path(id: t.id, hotel_id: t.id), method: :delete do %>
                          <i class="fas fa-heart"></i><%= t.likes.count %>
                        <% end %>
                      <% else %>
                        <%= button_to hotel_likes_path(id: t.id, hotel_id: t.id), method: :post do %>
                          <i class="far fa-heart"></i><%= t.likes.count %>
                        <% end %>
                      <% end %>
                    <% else %>
                      <i class="far fa-heart"></i><%= t.likes.count %>
                    <% end %>
                  </div>
                  <div><i class="far fa-comments"><%= link_to "コメント", hotel_path(t.id) %></i></div>
                  <% if user_signed_in? && current_user.id == t.user_id %>
                    <div><%= link_to "編集する", edit_hotel_path(t.id) %></div>
                    <div><%= button_to "削除する", hotel_path(t.id), method: :delete %></div>
                  <% end %>
                </div>
              </div>            
            </div>

          
          <% elsif t.category=="sightseen" %>
            <div class="tweet">
              <div class="tweet_left">
                <div class="user_inf">
                  <%= image_tag t.user.image_url, class: "round", size: "80x80" if t.user.image? %>
                  <h3><a href="/users/<%= t.user.id %>"><%= t.user.name %></a></h3>
                </div>
                <h2>「<%= t.title %>」</h2>
                <div class="image">
                  <%= image_tag t.image_url, size: "500x400" if t.image? %>
                </div>
              </div>

              <div class="tweet_right">
                <div class="create_time"><%= t.created_at %></div>
                <div class="star_content">
                  <p>総合評価 : <%= t.star%>点</p>
                  <div id="star-rate<%= t.id%>"></div>    
                      
                        <script>
                        $('#star-rate<%= t.id%>').raty({
                          size      : 40,
                          starOff   : '<%= asset_path('star-off.png') %>',
                          starOn    : '<%= asset_path('star-on.png') %>',
                          half      : false,
                          readOnly: true,
                          score: <%= t.star %>,
                        });
                      </script>
                </div>


                <div class="contents"><%= t.body %></div>
                

                <div class="user_edit">
                  <div>
                    <% if user_signed_in? %>
                      <% if current_user.already_liked?(t) %>
                        <%= button_to hotel_like_path(id: t.id, hotel_id: t.id), method: :delete do %>
                          <i class="fas fa-heart"></i><%= t.likes.count %>
                        <% end %>
                      <% else %>
                        <%= button_to hotel_likes_path(id: t.id, hotel_id: t.id), method: :post do %>
                          <i class="far fa-heart"></i><%= t.likes.count %>
                        <% end %>
                      <% end %>
                    <% else %>
                      <i class="far fa-heart"></i><%= t.likes.count %>
                    <% end %>
                  </div>
                  <div><i class="far fa-comments"><%= link_to "コメント", hotel_path(t.id) %></i></div>
                  <% if user_signed_in? && current_user.id == t.user_id %>
                    <div><%= link_to "編集する", edit_hotel_path(t.id) %></div>
                    <div><%= button_to "削除する", hotel_path(t.id), method: :delete %></div>
                  <% end %>
                </div>
              </div>            
            </div>

          <% elsif t.category=="gurmet" %>
            <div class="tweet">
              <div class="tweet_left">
                <div class="user_inf">
                  <%= image_tag t.user.image_url, class: "round", size: "80x80" if t.user.image? %>
                  <h3><a href="/users/<%= t.user.id %>"><%= t.user.name %></a></h3>
                </div>
                <h2>「<%= t.title %>」</h2>
                <div class="image">
                  <%= image_tag t.image_url, size: "500x400" if t.image? %>
                </div>
              </div>

              <div class="tweet_right">
                <div class="create_time"><%= t.created_at %></div>
                <div class="star_content">
                  <p>総合評価 : <%= t.star%>点</p>
                  <div id="star-rate<%= t.id%>"></div>    
                      
                        <script>
                        $('#star-rate<%= t.id%>').raty({
                          size      : 40,
                          starOff   : '<%= asset_path('star-off.png') %>',
                          starOn    : '<%= asset_path('star-on.png') %>',
                          half      : false,
                          readOnly: true,
                          score: <%= t.star %>,
                        });
                      </script>
                </div>


                <div class="contents"><%= t.body %></div>
                

                <div class="user_edit">
                  <div>
                    <% if user_signed_in? %>
                      <% if current_user.already_liked?(t) %>
                        <%= button_to hotel_like_path(id: t.id, hotel_id: t.id), method: :delete do %>
                          <i class="fas fa-heart"></i><%= t.likes.count %>
                        <% end %>
                      <% else %>
                        <%= button_to hotel_likes_path(id: t.id, hotel_id: t.id), method: :post do %>
                          <i class="far fa-heart"></i><%= t.likes.count %>
                        <% end %>
                      <% end %>
                    <% else %>
                      <i class="far fa-heart"></i><%= t.likes.count %>
                    <% end %>
                  </div>
                  <div><i class="far fa-comments"><%= link_to "コメント", hotel_path(t.id) %></i></div>
                  <% if user_signed_in? && current_user.id == t.user_id %>
                    <div><%= link_to "編集する", edit_hotel_path(t.id) %></div>
                    <div><%= button_to "削除する", hotel_path(t.id), method: :delete %></div>
                  <% end %>
                </div>
              </div>            
            </div>
          <% end %>
      <% end %>

    </div>
    
    <footer>
          <p>Copyright © GeekSalon All Rights Reserved.</p>
    </footer>
 </div>
    
</div>

<script>
  
document.addEventListener('DOMContentLoaded',function() {
    document.getElementById("menuButton").addEventListener("click", function() {
        this.classList.toggle("active");
        document.getElementById('nav').classList.toggle('active');
        document.getElementById('mask').classList.toggle('active');
    })
});

document.getElementById('mask').addEventListener('click', function() {
    this.classList.remove('active')
    document.getElementById('nav').classList.remove('active')
    document.getElementById('menuButton').classList.remove('active')
})

</script>

